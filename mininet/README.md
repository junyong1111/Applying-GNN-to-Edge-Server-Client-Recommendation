# Cloud 및 Device 네트워크 시뮬레이션 with Mininet

이 프로젝트는 Mininet을 사용하여 네트워크 환경을 시뮬레이션하고, 이를 통해 그래프 신경망(GNN)을 학습시키기 위한 데이터를 생성한다. 시뮬레이션은 다양한 특성을 가진 여러 클라우드 서버와 디바이스를 포함하며, 네트워크 동작과 상호 작용을 평가하기 위해 시간 경과에 따른 성능 지표를 캡처한다.

## 프로젝트 개요

### 목적
이 프로젝트의 주요 목표는 디바이스와 클라우드 서버가 네트워크 조건 및 성능 특성에 따라 상호 작용하는 현실적인 네트워크 시뮬레이션 환경을 만드는 것이다. 이 시뮬레이션에서 생성된 데이터는 네트워크 최적화, 로드 밸런싱 및 성능 예측과 같은 다양한 작업을 위해 GNN을 학습시키는 데 사용할 수 있다.

### 주요 기능
1. **클라우드 서버 및 디바이스**: 시뮬레이션에는 CPU 사용량, 대역폭, 지연 시간 및 자체 처리 능력에 대한 고유한 특성을 가진 여러 클라우드 서버 및 디바이스가 포함된다.
2. **동적 네트워크 조건**: 네트워크 성능 지표(대역폭, 지연 시간, 손실률)는 시뮬레이션 중에 동적으로 측정되어 현실적인 네트워크 조건을 반영한다.
3. **의사 결정**: 디바이스는 계산된 성능 점수 및 평가를 기반으로 최상의 클라우드 서버를 선택하거나 로컬에서 데이터를 처리한다.
4. **시간별 활동 수준**: 네트워크 활동 수준은 매 시간마다 변동하여 실제 사용 패턴을 시뮬레이션한다.
5. **CSV 로깅**: 디바이스 및 클라우드 서버 특성뿐만 아니라 시뮬레이션 결과도 CSV 파일에 기록되어 추가 분석이 가능하다.

## 파일 설명

### `CloudServer` 및 `Device` 클래스
- **CloudServer**: 시간별로 변화하는 CPU 사용량, 대역폭 및 지연 시간을 가진 클라우드 서버를 나타낸다.
- **Device**: CPU, 대역폭, 지연 시간, 손실률 및 자체 처리 능력에 대한 고정된 특성을 가진 디바이스를 나타낸다.

### `CustomTopo` 클래스
- 클라우드 서버와 디바이스를 중앙 스위치에 연결하여 Mininet에서 네트워크 토폴로지를 정의한다.

### `create_network(num_clouds, num_devices)`
- 지정된 수의 클라우드 서버와 디바이스로 네트워크를 초기화한다.

### `get_network_activity(hour)`
- 하루의 특정 시간에 대한 네트워크 활동 수준을 반환한다.

### `measure_performance(net, src, dst)`
- iperf 및 ping을 사용하여 소스 디바이스와 대상 클라우드 서버 간의 대역폭, 지연 시간 및 손실률을 측정한다.

### `calculate_rating(bandwidth, delay, loss)`
- 성능 지표를 기반으로 평가 점수를 계산한다.

### `select_best_cloud(net, device, cloud_servers, cloud_loads, hour)`
- 성능 점수 및 평가를 기반으로 최상의 클라우드 서버를 선택하거나 로컬에서 처리한다.

### `save_characteristics(devices, cloud_servers)`
- 디바이스 및 클라우드 서버의 특성을 CSV 파일에 저장한다.

### `run_simulation(net, cloud_servers, devices, duration, interval)`
- 시뮬레이션을 실행하고 주기적으로 성능을 측정하여 결과를 기록한다.

### 메인 스크립트
- 네트워크를 초기화하고 특성을 저장한 후 시뮬레이션을 실행한다. 사용자 인터럽션을 캡처하고 예외를 처리한다.

## 사용법

1. **환경 설정**: 시스템에 Mininet이 설치되고 구성되어 있는지 확인한다.
2. **시뮬레이션 실행**: 메인 스크립트를 실행하여 시뮬레이션을 시작한다:
   ```bash
   python simulation_script.py
   ```
3. **결과 분석**: 생성된 CSV 파일에서 각 디바이스 및 클라우드 서버의 특성과 시뮬레이션 결과를 확인한다.

## 예제 CSV 파일
- **`device_characteristics.csv`**: 각 디바이스의 정적 특성을 포함한다.
- **`cloud_characteristics.csv`**: 각 클라우드 서버의 시간별 변화하는 특성을 포함한다.
- **`simulation_results.csv`**: 각 시간 단계에서 각 디바이스의 선택된 클라우드 서버, 성능 지표 및 평가를 기록한다.

## 향후 작업
- **향상**: 다양한 네트워크 조건에서 더 나은 성능을 발휘할 수 있도록 의사 결정 알고리즘을 개선한다.
- **확장성**: 더 많은 디바이스와 클라우드 서버를 사용하여 시뮬레이션을 테스트한다.
- **GNN 통합**: 생성된 데이터를 사용하여 네트워크 최적화 작업을 위한 GNN 모델을 학습하고 평가한다.